var be=Object.defineProperty;var Ee=(t,n,e)=>n in t?be(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var m=(t,n,e)=>(Ee(t,typeof n!="symbol"?n+"":n,e),e);import{d as z,o as Ce,r as Be,c as Te,a as B,b as Le,e as ke,f as De,g as E,h as Me,i as j,j as N,t as Pe,l as Ie,k as $e,m as k,n as Oe,p as S,q as de,u as Se,s as Z,v as Re,w as Fe,x as Ae,y as x,z as Ke,A as Ue}from"./vendor-cfe435e2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const ze="modulepreload",je=function(t,n){return new URL(t,n).href},Y={},X=function(n,e,s){if(!e||e.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=je(r,s),r in Y)return;Y[r]=!0;const a=r.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(!!s)for(let u=o.length-1;u>=0;u--){const l=o[u];if(l.href===r&&(!a||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":ze,a||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),a)return new Promise((u,l)=>{c.addEventListener("load",u),c.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>n()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})},Ne=z({__name:"App",setup(t){const n=e=>e.preventDefault();return Ce(()=>{document.addEventListener("selectstart",n),document.addEventListener("contextmenu",n),document.addEventListener("contextmenu",n,!0),document.addEventListener("keydown",e=>{e.altKey&&e.keyCode===37&&n(e),e.altKey&&e.keyCode===38&&n(e),e.altKey&&e.keyCode===39&&n(e),e.altKey&&e.keyCode===40&&n(e)})}),(e,s)=>{const o=Be("router-view");return B(),Te(o)}}}),D=Le({history:ke(),routes:[]}),We=t=>(D.addRoute({path:"/",component:t.loginComp,name:"Login"}),D.addRoute({path:"/home",component:t.homeComp,name:"Home"}),D);var ue=(t=>(t.Admin="admin",t.User="user",t))(ue||{}),Ve=(t=>(t.Admin="管理员",t.User="用户",t))(Ve||{});const qe=""+new URL("user_avatar_default-98817a57.png",import.meta.url).href,He=""+new URL("wallpaper_default-86032ef7.jpg",import.meta.url).href,J="token",Ge=De("user",()=>{const t=E("user"),n=E("123456789"),e=E(null),s=E("");return{username:t,password:n,user:e,token:s,setToken:i=>{s.value=i,localStorage.setItem(J,i)},getToken:()=>s.value||localStorage.getItem(J),setUser:i=>{i?e.value={...i,avatar:new URL(i.avatar).href,wallpaper:new URL(i.wallpaper).href}:e.value=Qe}}}),Qe={_id:String(Math.random()),username:"user",avatar:qe,email:"user@qq.com",role:ue.User,wallpaper:He,downloadedApp:[]},me=Me.create({baseURL:"http://127.0.0.1:3000/api/v1",timeout:2e3,withCredentials:!0});me.interceptors.request.use(t=>t);me.interceptors.response.use(t=>Promise.resolve(t),t=>{const n=t.response.status,e=Ge();switch(n){case 401:case 403:D.push("/"),e.user=null,e.setToken("Invalid token");break}return Promise.reject(t)});const Ze=["get","post","delete","patch","put"],ee=t=>Promise.resolve(null);Ze.forEach(t=>{ee[t]=(n,e,s,o)=>{const r=(o==null?void 0:o.headers)||{};return s==="form"&&(r["Content-Type"]="multipart/form-data"),ee({method:t,url:n,data:e,...o,headers:r})}});const Ye=["日","一","二","三","四","五","六"],pe=()=>j(new Date),p=t=>t<10?"0"+t:String(t),he=t=>`星期${Ye[t]}`,Nt=(t,n,e="day")=>j(t).diff(n,e),Wt=(t=j())=>`${t.year()}-${p(t.month()+1)}-${p(t.date())}`,fe=[];setInterval(()=>{fe.forEach(t=>t())},24*60*60*1e3);const Vt=t=>{fe.push(t)},g=pe(),Xe=N({hour:p(g.hour()),minute:p(g.minute()),second:p(g.second()),year:String(g.year()),month:p(g.month()+1),date:p(g.date()),day:he(g.day()),lunar:"一月初一"}),{hour:W,minute:V,month:M,date:P,day:Je,year:I,second:et,lunar:tt}=Pe(Xe);setInterval(()=>{const t=pe();W.value=p(t.hour()),V.value=p(t.minute()),I.value=String(t.year()),M.value=p(t.month()+1),P.value=p(t.date()),Je.value=he(t.day()),et.value=p(t.second()),tt.value=Ie.getLunar(I.value,M.value,P.value).dateStr},1e3);const qt=t=>p(t.date())===P.value&&p(t.month()+1)===M.value&&String(t.year())===I.value,ve=`${I.value}-${M.value}-${P.value}`,nt=["mp4","mp3","html","txt","js","ts","css",""];class b{constructor(n){m(this,"name");m(this,"extension");m(this,"size");m(this,"createdAt");const{name:e,extension:s,size:o,createdAt:r}=n;this.name=e,this.extension=s,this.size=o||"0KB",this.createdAt=r||`${ve} ${W.value}:${V.value}`}setName(n){this.name=n}get fullName(){return`${this.name}${this.extension?`.${this.extension}`:""}`}set fullName(n){const e=n.split(".")[0],s=n.split(".")[1]||"";if(nt.includes(s))this.extension=s,this.name=e;else throw new Error(`无法设置 .${s} 的后缀名`)}}const h=class h{constructor(n,e){m(this,"name");m(this,"size","0KB");m(this,"children",[]);m(this,"parent");m(this,"createdAt");const{name:s,children:o,createdAt:r}=n;this.name=s,this.parent=e,this.createdAt=r||`${ve} ${W.value}:${V.value}`,this.initChildren(o),this.initSize()}initChildren(n){n.forEach(e=>{e.extension?this.children.push(new b(e)):this.children.push(new h(e,this))})}initSize(){this.size=st(this.children.reduce((n,e)=>ye(n,e.size),"0KB"))}addFolder(n="新建文件夹"){const e=s=>{let o=s;for(;ne(this.children,o);)o=se(o);return o};if(n instanceof h){if(te(this,n.size))throw new Error("超出当前磁盘内存");return n.name=e(n.name),this.children.push(n),n}else{n=e(n);const s=new h({name:n,children:[]},this);return this.children.push(s),s}}addFile(n,e="0KB"){if(te(this,e))throw new Error("超出当前磁盘内存");const s=o=>(ne(this.children,o)&&(o=se(o)),o);if(n instanceof b)return n.name=s(n.name),this.children.push(n),n;{const o=new b({name:"",extension:"",size:e});return o.fullName=n,o.name=s(o.name),this.children.push(o),o}}removeFolder(n){let e=-1;n instanceof h?e=this.children.findIndex(s=>s===n):e=this.children.findIndex(s=>{if(s instanceof h)return s.name===n}),e>-1&&this.children.splice(e,1)}removeFile(n){let e=-1;n instanceof b?e=this.children.findIndex(s=>s===n):e=this.children.findIndex(s=>{if(s instanceof b)return s.name===n}),e>-1&&this.children.splice(e,1)}hasParentFolder(n){let e=this;for(;e;){if(e===n)return!0;e=e.parent}return!1}get path(){return`${this.parent.path}${this.name}\\`}static search(n){const e=[],s=o=>{for(const r of o)r.name.toLowerCase().match(n.toLowerCase())&&e.push(r),ot(r)||s(r.children)};return s(oe),e}static findByPath(n){const e=n.split("\\").filter(i=>i),s=oe.find(i=>i.name.match(/[A-Z]:/)[0]===e[0]),o=new Set([]);if(!s)return null;let r=1,a=s;for(;r<e.length;){o.add(a);const i=a.children.find(d=>o.has(a)?d.name===e[r]:!1);if(i)a=i,r++;else return null}return a}};m(h,"getDDesc",()=>h.findByPath("D:\\")),m(h,"getCDesc",()=>h.findByPath("C:\\")),m(h,"getDeskTop",()=>h.search("Desktop")[0]);let w=h;const te=(t,n)=>{let e=t;for(;e.parent;)e=e.parent;return $(ye(e.size,n))>$(e.memory)};class q extends w{constructor(e){const{name:s,memory:o,children:r}=e;super({name:s,children:r},null);m(this,"memory");this.memory=o}get path(){return`${this.name.match(/[A-Z]:/)[0]}\\\\`}}const R=["B","KB","MB","GB","TB"],F=1024,ye=(t,n)=>$(t)+$(n)+"B",st=t=>{const n=_e(t);let e=n.size,s=R.indexOf(n.unit);for(;e>=F;)e/=F,s++;return e+R[s]};function _e(t){const n={size:0,unit:""};return n.size=parseFloat(t),n.unit=t.match(/[a-z|A-Z]+/gi)[0].toUpperCase(),n}function $(t){const n=_e(t),e=R.indexOf(n.unit);return n.size*Math.pow(F,e)}const ne=(t,n)=>t.findIndex(e=>e.name===n)>-1,se=t=>`${t} - 副本`,ot=t=>t instanceof b,Ht=t=>t instanceof w,rt=[{name:"Windows (C:)",memory:"16GB",children:[{name:"Adobe",children:[]},{name:"Office",children:[]},{name:"Users",children:[]},{name:"DeskTop",children:[{name:"Video",posIdx:11,children:[{name:"QQ Video",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"50KB"},{extension:"mp4",name:"一路向北",size:"56KB"}]},{name:"数字唱片",children:[{name:"bin",children:[]},{name:"pacakges",children:[{name:"pg-1",children:[]},{name:"pg-2",children:[]}]}]}]},{name:"Cloud Video",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"56KB"},{extension:"mp4",name:"一路向北",size:"56KB"}]}]},{extension:"mp4",name:"青花瓷",size:"50KB"}]},{name:"Music",posIdx:10,children:[{name:"QQ Music",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"50KB"},{extension:"mp4",name:"一路向北",size:"56KB"}]}]},{name:"Cloud Music",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"56KB"},{extension:"mp4",name:"一路向北",size:"56KB"}]}]}]}]},{extension:"html",name:"index",size:"11KB"}]},{name:"Data (D:)",memory:"160GB",children:[{name:"Music",children:[{name:"QQ Music",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"100GB"},{extension:"mp4",name:"一路向北",size:"56KB"}]}]},{name:"Cloud Music",children:[{name:"周杰伦的专辑",children:[{extension:"mp4",name:"青花瓷",size:"56KB"},{extension:"mp4",name:"一路向北",size:"56KB"}]}]}]},{extension:"html",name:"index",size:"20KB"}]}],O=N([]);setTimeout(()=>{const t=w.search("desktop")[0];O.push(t);const n=w.findByPath("C:\\");O.push(n);const e=w.findByPath("D:\\");O.push(e)});const oe=N(rt.map(t=>new q(t))),at=q.search("DeskTop")[0];at.addFolder();q.search("DeskTop");const Gt=()=>w.search("desktop")[0],it=$e();const ct={name:"WinBtn"},lt=z({...ct,props:{borderStyle:{type:String,default:"none"},bgColor:{type:String,default:"#edeaea4d"},opacity:{type:String,default:"1"},width:{type:Number,default:0},height:{type:Number,default:0},color:{type:String,default:"#fff"}},setup(t){const{borderStyle:n,bgColor:e,opacity:s,width:o,height:r,color:a}=t,i=()=>({border:n,backgroundColor:e,opacity:s,width:o?o+"px":"auto",height:r?r+"px":"auto",color:a});return(d,c)=>(B(),k("button",{class:"btn",style:S(i())},[Oe(d.$slots,"default",{},void 0,!0)],4))}});const we=(t,n)=>{const e=t.__vccOpts||t;for(const[s,o]of n)e[s]=o;return e},dt=we(lt,[["__scopeId","data-v-7d855f7d"]]),ut=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),mt=t=>(Fe("data-v-5758b5ee"),t=t(),Ae(),t),pt=mt(()=>de("input",{type:"checkbox",name:"check",class:"radio-original"},null,-1)),ht={key:0,class:"radio-label"},ft={name:"WinRadio"},vt=z({...ft,props:{modelValue:{type:Boolean,required:!0},label:{type:String},size:{type:Number,default:18}},emits:["update:modelValue"],setup(t,{emit:n}){const s=E(t.modelValue),o=()=>{s.value=!s.value,n("update:modelValue",s.value)};return(r,a)=>(B(),k("div",{class:"win-radio-wrapper",onClick:o},[pt,de("span",{class:"radio-inner",style:S({width:t.size+"px",height:t.size+"px"})},[Se(s)?(B(),k("i",{key:0,class:"iconfont icon-duigou",style:S({fontSize:t.size+"px"})},null,4)):Z("",!0)],4),t.label?(B(),k("span",ht,Re(t.label),1)):Z("",!0)]))}});const yt=we(vt,[["__scopeId","data-v-5758b5ee"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"})),re=Object.assign({"./WinBtn/index.vue":ut,"./WinRadio/index.vue":_t}),A=[];for(const t in re)A.push(re[t].default);const wt={install(t,n){n&&n.components?n.components.forEach(e=>{A.forEach(s=>{e===s.name&&t.component(s.name,s)})}):A.forEach(e=>{t.component(e.name,e)})}},gt="drag",xt={async mounted(t,n){var o;await x();const e=(o=n.value)!=null&&o.tar?bt(t,n.value.tar):t;if(!e)throw new Error("Unable to find the target node of draggable!");const s=r=>{var v,f;(f=(v=n.value)==null?void 0:v.onMousedownCb)==null||f.call(v,e);const a={x:r.pageX,y:r.pageY},i=window.getComputedStyle(e,null),d={left:parseFloat(i.left),top:parseFloat(i.top)},c={x:0,y:0},u=y=>{const _={x:y.pageX,y:y.pageY};c.x=_.x-a.x,c.y=_.y-a.y,e.style.left=d.left+c.x+"px",e.style.top=d.top+c.y+"px"},l=()=>{var y,_;(_=(y=n.value)==null?void 0:y.movedFn)==null||_.call(y,d.left+c.x,d.top+c.y),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",l)};t.addEventListener("mousedown",s)}},bt=(t,n)=>{let e=t;for(;!e.classList.contains(n.slice(1));)if(e.parentElement)e=e.parentElement;else return null;return e},Et=Object.freeze(Object.defineProperty({__proto__:null,directive:xt,name:gt},Symbol.toStringTag,{value:"Module"})),Ct="infinite-scroll",ae="scope",Bt=(t,n)=>{const e=n.value.load,s=n.value.initTop||50,o=n.value.scrollRate||5,r=n.value.scrollCb||(()=>{}),a=n.value.scrollingCb||(()=>{}),i=50,d=s<i?i:s;return{fn:e,initTop:d,rate:o,scrollCb:r,scrollingCb:a}},Tt={async mounted(t,n){await x();const{fn:e,initTop:s,rate:o,scrollCb:r,scrollingCb:a}=Bt(t,n);t.scrollTop=s;let i=0,d=0,c=E(!1),u;Ke(c,()=>{a(c.value)});const l=async v=>{if(c.value=!0,u&&clearTimeout(u),u=setTimeout(()=>{c.value=!1},200),t.clientHeight+t.scrollTop>=t.scrollHeight){for(let f=0;f<o;f++)e("down");await x()}if(t.scrollTop<=10){for(let f=0;f<o;f++)e("up"),d+=s;await x(),t.scrollTop=o*s}i=t.scrollTop-s-d,r(i<0?Math.ceil(i):Math.floor(i))};t[ae]={onScroll:l},t.addEventListener("scroll",l)},unmounted(t){const{onScroll:n}=t[ae];t.removeEventListener("scroll",n)}},Lt=Object.freeze(Object.defineProperty({__proto__:null,directive:Tt,name:Ct},Symbol.toStringTag,{value:"Module"})),kt="resize",ge=Symbol("RESIZED_EL_SCOPE"),Dt={async mounted(t,{value:n}){await x(),C.push(t),t[ge]={onMousedownCb:n==null?void 0:n.onMousedownCb},C.length===1&&(document.addEventListener("mousemove",ie),document.addEventListener("mousedown",ce,!0));const e=n&&n.movedFn||(()=>{}),s=n&&n.movingFn||(()=>{}),o=n&&n.onMousedownCb||(()=>{}),r=n&&n.border||{minWidth:0,minHeight:0};t.style.position="absolute",Pt({el:t,border:r,movedFn:e,movingFn:s,onMousedownCb:o})},unmounted(t){Rt(t),C.length||(document.removeEventListener("mousemove",ie),document.removeEventListener("mousedown",ce,!0))}},C=[],Mt=4;let xe,K=!1;const ie=async t=>{if(await x(),K)return;let n="";const e=document.body;C.some(s=>(xe=s,n=Ot({el:s,event:t,regionSize:Mt}),e.style.cursor=n?`${n}-resize`:"default",n))},ce=async t=>{var H,G;await x();const n=xe,e=document.body,s=t.pageX,o=t.pageY,r=e.style.cursor==="default"?"":e.style.cursor.split("-")[0],a=window.getComputedStyle(n,null),i=parseFloat(a.left),d=parseFloat(a.top),c=parseFloat(a.width),u=parseFloat(a.height),l=It(n);let v=0,f=0;r&&((G=(H=n[ge]).onMousedownCb)==null||G.call(H,n),$t(t));const y=Q=>{v=Q.pageX-s,f=Q.pageY-o,St({el:n,resizeDir:r,width:c,height:u,left:i,top:d,offsetX:v,offsetY:f,minWidth:l.border.minWidth,minHeight:l.border.minHeight,movingFn:l.movingFn}),K=!0},_=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",_),l.movedFn({width:parseInt(n.style.width),height:parseInt(n.style.height),left:parseInt(n.style.left),top:parseInt(n.style.top)}),K=!1};document.addEventListener("mousemove",y),document.addEventListener("mouseup",_)},U=[],Pt=t=>{U.push(t)},It=t=>{const n=U.findIndex(e=>e.el===t);return U[n]},$t=t=>{t.stopPropagation()},Ot=({el:t,event:n,regionSize:e})=>{const s=window.getComputedStyle(t,null),o=parseFloat(s.width),r=parseFloat(s.height),a=n.pageX-parseFloat(s.left),i=n.pageY-parseFloat(s.top),c=[{dir:"n",cond:i<e&&i>-e&&a>e&&a<o-e},{dir:"s",cond:i>r-e&&i<r+e&&a>e&&a<o-e},{dir:"w",cond:a<e&&a>-e&&i>e&&i<r-e},{dir:"e",cond:a>o-e&&a<o+e&&i>e&&i<r-e},{dir:"nw",cond:i<e&&i>-e&&a<e&&a>-e},{dir:"ne",cond:i<e&&i>-e&&a>o-e&&a<o+e},{dir:"sw",cond:i>r-e&&i<r+e&&a<e&&a>-e},{dir:"se",cond:i>r-e&&i<r+e&&a>o-e&&a<o+e}].find(u=>u.cond);return c?c.dir:""},St=({el:t,resizeDir:n,width:e,height:s,left:o,top:r,offsetX:a,offsetY:i,movingFn:d,minWidth:c=0,minHeight:u=0})=>{const l=new Map;if(l.set("n",()=>{L(s-i,u,()=>{t.style.top=r+i+"px",t.style.height=s-i+"px"})}),l.set("s",()=>{L(s+i,u,()=>{t.style.height=s+i+"px"})}),l.set("w",()=>{L(e-a,c,()=>{t.style.left=o+a+"px",t.style.width=e-a+"px"})}),l.set("e",()=>{L(e+a,c,()=>{t.style.width=e+a+"px"})}),n.length===1)l.get(n)();else if(n.length===2)for(let v of n)l.get(v)();d&&d({width:parseInt(t.style.width),height:parseInt(t.style.height),top:parseInt(t.style.top),left:parseInt(t.style.left)})},L=(t,n,e)=>{t>=n&&e()},Rt=t=>{const n=C.indexOf(t);n>-1&&C.splice(n,1)},Ft=Object.freeze(Object.defineProperty({__proto__:null,directive:Dt,name:kt},Symbol.toStringTag,{value:"Module"})),At=(t,n)=>e=>{e.directive(n,t)},le=Object.assign({"./drag.ts":Et,"./infinite-scroll.ts":Lt,"./resize.ts":Ft}),Kt=t=>{for(const n in le){const e=le[n];At(e.directive,e.name)(t)}},T=Ue(Ne),Ut=We({loginComp:()=>X(()=>import("./index-1aa3d1a4.js"),["./index-1aa3d1a4.js","./index.vue_vue_type_style_index_0_lang-1dc2e184.js","./vendor-cfe435e2.js","./index-70bf3afb.css","./index-e64ade27.css"],import.meta.url),homeComp:()=>X(()=>import("./index-908006a6.js").then(t=>t.i),["./index-908006a6.js","./vendor-cfe435e2.js","./index.vue_vue_type_style_index_0_lang-1dc2e184.js","./index-70bf3afb.css","./index-6394caed.css"],import.meta.url)});T.use(Ut);T.use(it);T.use(wt);Kt(T);T.mount("#app");export{w as F,O,ue as R,we as _,M as a,Je as b,ee as c,P as d,Ht as e,ot as f,Gt as g,W as h,Kt as i,X as j,at as k,et as l,V as m,tt as n,qt as o,p,Wt as q,D as r,Vt as s,ve as t,Ge as u,Nt as v,Ve as w,I as y};
